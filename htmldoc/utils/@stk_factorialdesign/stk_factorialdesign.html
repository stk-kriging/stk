<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of stk_factorialdesign</title>
  <meta name="keywords" content="stk_factorialdesign">
  <meta name="description" content="STK_FACTORIALDESIGN constructs a factorial design">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="../index.html">utils</a> &gt; <a href="index.html">@stk_factorialdesign</a> &gt; stk_factorialdesign.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for utils/@stk_factorialdesign&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>stk_factorialdesign
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>STK_FACTORIALDESIGN constructs a factorial design</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function x = stk_factorialdesign(levels, varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> STK_FACTORIALDESIGN constructs a factorial design</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../octave-sombrero.png)">
<li><a href="ndgrid.html" class="code" title="function varargout = ndgrid(x)">ndgrid</a>	NDGRID [overloaded base function]</li></ul>
This function is called by:
<ul style="list-style-image:url(../../octave-sombrero.png)">
<li><a href="set.html" class="code" title="function x = set(x, propname, value)">set</a>	SET [overloaded base function]</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">% STK_FACTORIALDESIGN constructs a factorial design</span>
0002 
0003 <span class="comment">% Copyright Notice</span>
0004 <span class="comment">%</span>
0005 <span class="comment">%    Copyright (C) 2013 SUPELEC</span>
0006 <span class="comment">%</span>
0007 <span class="comment">%    Author: Julien Bect  &lt;julien.bect@supelec.fr&gt;</span>
0008 
0009 <span class="comment">% Copying Permission Statement</span>
0010 <span class="comment">%</span>
0011 <span class="comment">%    This file is part of</span>
0012 <span class="comment">%</span>
0013 <span class="comment">%            STK: a Small (Matlab/Octave) Toolbox for Kriging</span>
0014 <span class="comment">%               (http://sourceforge.net/projects/kriging)</span>
0015 <span class="comment">%</span>
0016 <span class="comment">%    STK is free software: you can redistribute it and/or modify it under</span>
0017 <span class="comment">%    the terms of the GNU General Public License as published by the Free</span>
0018 <span class="comment">%    Software Foundation,  either version 3  of the License, or  (at your</span>
0019 <span class="comment">%    option) any later version.</span>
0020 <span class="comment">%</span>
0021 <span class="comment">%    STK is distributed  in the hope that it will  be useful, but WITHOUT</span>
0022 <span class="comment">%    ANY WARRANTY;  without even the implied  warranty of MERCHANTABILITY</span>
0023 <span class="comment">%    or FITNESS  FOR A  PARTICULAR PURPOSE.  See  the GNU  General Public</span>
0024 <span class="comment">%    License for more details.</span>
0025 <span class="comment">%</span>
0026 <span class="comment">%    You should  have received a copy  of the GNU  General Public License</span>
0027 <span class="comment">%    along with STK.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
0028 
0029 <a name="_sub0" href="#_subfunctions" class="code">function x = stk_factorialdesign(levels, varargin)</a>
0030 
0031 <span class="keyword">if</span> nargin == 0  <span class="comment">% default constructor</span>
0032     levels = {[]};
0033 <span class="keyword">end</span>
0034 
0035 <span class="comment">% number of factors</span>
0036 d = length(levels);
0037 
0038 <span class="keyword">if</span> ~iscell(levels) || (numel(levels) ~= d)
0039     
0040     errmsg = <span class="string">'Expecting a &quot;flat&quot; cell array as first argument.'</span>;
0041     stk_error(errmsg, <span class="string">'TypeMismatch'</span>);
0042     
0043 <span class="keyword">else</span>
0044     
0045     <span class="keyword">if</span> ~all(cellfun(@isnumeric, levels))
0046         
0047         errmsg = <span class="string">'Only numeric factors are currently supported.'</span>;
0048         stk_error(errmsg, <span class="string">'TypeMismatch'</span>);
0049         
0050     <span class="keyword">else</span> <span class="comment">% ok, numeric levels, we know how to handle that</span>
0051         
0052         <span class="keyword">if</span> (d == 0) || any(cellfun(@isempty, levels))
0053             
0054             xdata = zeros(0, d);
0055             
0056         <span class="keyword">elseif</span> d == 1
0057             
0058             xdata = levels{1}(:);
0059             
0060         <span class="keyword">else</span>
0061             
0062             <span class="comment">% coordinate arrays</span>
0063             coord = cell(1, d);
0064             [coord{:}] = <a href="ndgrid.html" class="code" title="function varargout = ndgrid(x)">ndgrid</a>(levels{:});
0065             
0066             <span class="comment">% design matrix</span>
0067             xdata = zeros(numel(coord{1}), d);
0068             <span class="keyword">for</span> j = 1:d,
0069                 xdata(:, j) = coord{j}(:);
0070             <span class="keyword">end</span>
0071             
0072         <span class="keyword">end</span>
0073         
0074         <span class="comment">% base dataframe</span>
0075         df = stk_dataframe(xdata, varargin{:});
0076         
0077         <span class="comment">% &quot;factorial design&quot; object</span>
0078         x = struct(<span class="string">'levels'</span>, {levels});
0079         x = class(x, <span class="string">'stk_factorialdesign'</span>, df);
0080         
0081     <span class="keyword">end</span> <span class="comment">% if</span>
0082     
0083 <span class="keyword">end</span> <span class="comment">% if</span>
0084 
0085 <span class="keyword">end</span> <span class="comment">% function stk_factorialdesign</span>
0086 
0087 
0088 <span class="comment">%--- constructor --------------------------------------------------------------</span>
0089 
0090 <span class="comment">%!test % default constructor</span>
0091 <span class="comment">%! x = stk_factorialdesign();</span>
0092 <span class="comment">%! assert(strcmp(class(x), 'stk_factorialdesign'));</span>
0093 
0094 <span class="comment">%!test % constructor with two factors + column names</span>
0095 <span class="comment">%! x = stk_factorialdesign({[0 1], [1 2 3]}, {'a', 'b'})</span>
0096 <span class="comment">%! assert( isequal(x.colnames, {'a', 'b'}) );</span>
0097 <span class="comment">%! assert( isequal(get(x, 'colnames'), {'a', 'b'}) );</span>
0098 
0099 <span class="comment">% tests some incorrect values for 'levels'</span>
0100 <span class="comment">%!error stk_factorialdesign('bouh');</span>
0101 <span class="comment">%!error stk_factorialdesign(repmat({[0 1]}, 2, 2));</span>
0102 
0103 <span class="comment">% categorical variable not supported yet</span>
0104 <span class="comment">%!error stk_factorialdesign({{'a' 'b'}});</span>
0105 
0106 <span class="comment">%--- disp &amp; display -----------------------------------------------------------</span>
0107 
0108 <span class="comment">%!shared x fmt</span>
0109 <span class="comment">%! try % doesn't work on old Octave versions, nevermind</span>
0110 <span class="comment">%!   fmt = get (0, 'Format');</span>
0111 <span class="comment">%! catch</span>
0112 <span class="comment">%!   fmt = nan;</span>
0113 <span class="comment">%! end</span>
0114 <span class="comment">%! x = stk_sampling_regulargrid (3^2, 2);</span>
0115 
0116 <span class="comment">%!test format rat;      disp (x);</span>
0117 <span class="comment">%!test format long;     disp (x);</span>
0118 <span class="comment">%!test format short;    disp (x);</span>
0119 <span class="comment">%!     if ~isnan (fmt), set (0, 'Format', fmt); end</span>
0120 
0121 <span class="comment">%!test disp (stk_sampling_regulargrid (0^1, 1));</span>
0122 <span class="comment">%!test disp (stk_sampling_regulargrid (0^2, 2));</span>
0123 
0124 <span class="comment">%!test display (x);</span>
0125 
0126 <span class="comment">%--- size, length, end --------------------------------------------------------</span>
0127 
0128 <span class="comment">%!error length(stk_sampling_regulargrid(7^2, 2))  % not defined</span>
0129 
0130 <span class="comment">%!shared x</span>
0131 <span class="comment">%! x = stk_factorialdesign({[0 1], [0 1]});</span>
0132 <span class="comment">%!assert (isequal (x(2:end, :), x(2:4, :)))</span>
0133 <span class="comment">%!assert (isequal (x(2, 1:end), x(2, :)))</span>
0134 <span class="comment">%!assert (isequal (x(2:end, 2:end), x(2:4, 2)))</span>
0135 <span class="comment">%!error x(1:end, 1:end, 1:end)</span>
0136 
0137 <span class="comment">%--- cat, vertcat, horzcat ----------------------------------------------------</span>
0138 
0139 <span class="comment">% Note: the output is a plain stk_dataframe</span>
0140 
0141 <span class="comment">%!shared x y</span>
0142 <span class="comment">%! x = stk_sampling_regulargrid(3^2, 2);</span>
0143 <span class="comment">%! y = x;</span>
0144 
0145 <span class="comment">%!test %%%% vercat</span>
0146 <span class="comment">%! z = vertcat(x, y);</span>
0147 <span class="comment">%! assert (strcmp(class(z), 'stk_dataframe'));</span>
0148 <span class="comment">%! assert (isequal(double(z), [double(x); double(y)]));</span>
0149 
0150 <span class="comment">%!test %%%% same thing, using cat(1, ...)</span>
0151 <span class="comment">%! z = cat(1, x, y);</span>
0152 <span class="comment">%! assert (strcmp(class(z), 'stk_dataframe'));</span>
0153 <span class="comment">%! assert (isequal(double(z), [double(x); double(y)]));</span>
0154 
0155 <span class="comment">%!test %%%% horzcat</span>
0156 <span class="comment">%! y.colnames = {'y1' 'y2'}; z = horzcat(x, y);</span>
0157 <span class="comment">%! assert (strcmp(class(z), 'stk_dataframe'));</span>
0158 <span class="comment">%! assert (isequal(double(z), [double(x) double(y)]));</span>
0159 
0160 <span class="comment">%!test %%%% same thing, using cat(2, ...)</span>
0161 <span class="comment">%! z = cat(2, x, y);</span>
0162 <span class="comment">%! assert (strcmp(class(z), 'stk_dataframe'));</span>
0163 <span class="comment">%! assert (isequal(double(z), [double(x) double(y)]));</span>
0164 
0165 <span class="comment">%!error cat(3, x, y)</span>
0166 
0167 <span class="comment">%--- apply &amp; related functions ------------------------------------------------</span>
0168 
0169 <span class="comment">%!shared x t</span>
0170 <span class="comment">%! x = stk_sampling_regulargrid(3^2, 2);</span>
0171 <span class="comment">%! t = double(x);</span>
0172 
0173 <span class="comment">%!assert (isequal(apply(x, 1, @sum), sum(t, 1)))</span>
0174 <span class="comment">%!assert (isequal(apply(x, 2, @sum), sum(t, 2)))</span>
0175 <span class="comment">%!error u = apply(x, 3, @sum);</span>
0176 
0177 <span class="comment">%!assert (isequal(apply(x, 1, @min, []), min(t, [], 1)))</span>
0178 <span class="comment">%!assert (isequal(apply(x, 2, @min, []), min(t, [], 2)))</span>
0179 <span class="comment">%!error u = apply(x, 3, @min, []);</span>
0180 
0181 <span class="comment">%!assert (isequal(min(x), min(t)))</span>
0182 <span class="comment">%!assert (isequal(max(x), max(t)))</span>
0183 <span class="comment">%!assert (isequal(std(x), std(t)))</span>
0184 <span class="comment">%!assert (isequal(var(x), var(t)))</span>
0185 <span class="comment">%!assert (isequal(sum(x), sum(t)))</span>
0186 <span class="comment">%!assert (isequal(mean(x), mean(t)))</span>
0187 <span class="comment">%!assert (isequal(mode(x), mode(t)))</span>
0188 <span class="comment">%!assert (isequal(prod(x), prod(t)))</span>
0189 <span class="comment">%!assert (isequal(median(x), median(t)))</span>
0190 
0191 <span class="comment">%--- bsxfun &amp; related functions -----------------------------------------------</span>
0192 
0193 <span class="comment">%!shared x1 x2 x3 u1 u2 u3</span>
0194 <span class="comment">%! x1 = stk_sampling_regulargrid([4 3], 2);  u1 = double(x1);</span>
0195 <span class="comment">%! x2 = stk_sampling_regulargrid([3 4], 2);  u2 = double(x2);</span>
0196 <span class="comment">%! x3 = x1 + 1;                              u3 = u1 + 1;</span>
0197 
0198 <span class="comment">%!test</span>
0199 <span class="comment">%! z = bsxfun(@plus, x1, u2);</span>
0200 <span class="comment">%! assert(isa(z, 'stk_dataframe') &amp;&amp; isequal(double(z), u1 + u2))</span>
0201 
0202 <span class="comment">%!test</span>
0203 <span class="comment">%! z = bsxfun(@plus, u1, x2);</span>
0204 <span class="comment">%! assert(isa(z, 'double') &amp;&amp; isequal(z, u1 + u2))</span>
0205 
0206 <span class="comment">%!test</span>
0207 <span class="comment">%! z = bsxfun(@plus, x1, x2);</span>
0208 <span class="comment">%! assert(isa(z, 'stk_dataframe') &amp;&amp; isequal(double(z), u1 + u2))</span>
0209 
0210 <span class="comment">%!test  z = min(x1, x2);     assert(isequal(double(z), min(u1, u2)));</span>
0211 <span class="comment">%!test  z = max(x1, x2);     assert(isequal(double(z), max(u1, u2)));</span>
0212 <span class="comment">%!error z = min(x1, x2, 1);</span>
0213 <span class="comment">%!error z = max(x1, x2, 1);</span>
0214 
0215 <span class="comment">%!test  z = x1 + x2;           assert(isequal(double(z), u1 + u2));</span>
0216 <span class="comment">%!test  z = x1 - x2;           assert(isequal(double(z), u1 - u2));</span>
0217 <span class="comment">%!test  z = x1 .* x2;          assert(isequal(double(z), u1 .* u2));</span>
0218 <span class="comment">%!test  z = x3 .\ x2;          assert(isequal(double(z), u3 .\ u2));</span>
0219 <span class="comment">%!test  z = x2 ./ x3;          assert(isequal(double(z), u2 ./ u3));</span>
0220 <span class="comment">%!test  z = x3 .^ x2;          assert(isequal(double(z), u3 .^ u2));</span>
0221 <span class="comment">%!test  z = realpow(x3, x2);   assert(isequal(double(z), realpow(u3, u2)));</span>
0222 
0223 <span class="comment">%!test  z = (x1 == x2);        assert(isequal(double(z), (u1 == u2)));</span>
0224 <span class="comment">%!test  z = (x1 ~= x2);        assert(isequal(double(z), (u1 ~= u2)));</span>
0225 <span class="comment">%!test  z = (x1 &lt;= x2);        assert(isequal(double(z), (u1 &lt;= u2)));</span>
0226 <span class="comment">%!test  z = (x1 &gt;= x2);        assert(isequal(double(z), (u1 &gt;= u2)));</span>
0227 <span class="comment">%!test  z = (x1 &lt; x2);         assert(isequal(double(z), (u1 &lt; u2)));</span>
0228 <span class="comment">%!test  z = (x1 &gt; x2);         assert(isequal(double(z), (u1 &gt; u2)));</span>
0229 
0230 <span class="comment">%!test  z = x1 &amp; x2;           assert(isequal(double(z), u1 &amp; u2));</span>
0231 <span class="comment">%!test  z = x1 | x2;           assert(isequal(double(z), u1 | u2));</span>
0232 <span class="comment">%!test  z = xor(x1, x2);       assert(isequal(double(z), xor(u1, u2)));</span>
0233 
0234 <span class="comment">%--- transpose, ctranspose ----------------------------------------------------</span>
0235 
0236 <span class="comment">% Transposing a dataframe that represents a factorial design results in a</span>
0237 <span class="comment">% dataframe that does NOT represent a factorial design</span>
0238 
0239 <span class="comment">%!shared x</span>
0240 <span class="comment">%! x = stk_factorialdesign({[0 1], [0 1 2]});</span>
0241 <span class="comment">%!assert (strcmp (class(x'), 'stk_dataframe'))</span>
0242 <span class="comment">%!assert (strcmp (class(x.'), 'stk_dataframe'))</span></pre></div>
<hr>

<address>
   HTML documentation for <strong>STK 2.0.0</strong>,
   generated by <strong>
   <a href="http://www.artefact.tk/software/matlab/m2html/" title="M2HTML website">M2HTML 1.5</a></strong>
</address>

</body>
</html>