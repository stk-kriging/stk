<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of subsasgn</title>
  <meta name="keywords" content="subsasgn">
  <meta name="description" content="SUBSASGN [overloaded base function]">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="../index.html">utils</a> &gt; <a href="index.html">@stk_dataframe</a> &gt; subsasgn.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for utils/@stk_dataframe&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>subsasgn
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>SUBSASGN [overloaded base function]</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function x = subsasgn(x, idx, val) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> SUBSASGN [overloaded base function]</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../octave-sombrero.png)">
<li><a href="double.html" class="code" title="function xdata = double(x)">double</a>	DOUBLE [overloaded base function]</li><li><a href="end.html" class="code" title="function idx = end(x, k, nb_indices)">end</a>	END implements the the 'end' keyword for indexing</li><li><a href="get.html" class="code" title="function value = get (x, propname)">get</a>	GET [overloaded base function]</li><li><a href="horzcat.html" class="code" title="function z = horzcat(x, y, varargin)">horzcat</a>	HORZCAT [overloaded base function]</li><li><a href="isempty.html" class="code" title="function b = isempty(x)">isempty</a>	ISEMPTY [overloaded base function]</li><li><a href="length.html" class="code" title="function N = length(x) %#ok<STOUT>">length</a>	LENGTH [overloaded base function]</li><li><a href="set.html" class="code" title="function x = set (x, propname, value)">set</a>	SET [overloaded base function]</li><li><a href="size.html" class="code" title="function varargout = size(x, varargin)">size</a>	SIZE [overloaded base function]</li><li><a href="subsasgn.html" class="code" title="function x = subsasgn(x, idx, val)">subsasgn</a>	SUBSASGN [overloaded base function]</li><li><a href="vertcat.html" class="code" title="function z = vertcat(x, y, varargin)">vertcat</a>	VERTCAT [overloaded base function]</li></ul>
This function is called by:
<ul style="list-style-image:url(../../octave-sombrero.png)">
<li><a href="subsasgn.html" class="code" title="function x = subsasgn(x, idx, val)">subsasgn</a>	SUBSASGN [overloaded base function]</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">% SUBSASGN [overloaded base function]</span>
0002 
0003 <span class="comment">% Copyright Notice</span>
0004 <span class="comment">%</span>
0005 <span class="comment">%    Copyright (C) 2013 SUPELEC</span>
0006 <span class="comment">%</span>
0007 <span class="comment">%    Author: Julien Bect  &lt;julien.bect@supelec.fr&gt;</span>
0008 
0009 <span class="comment">% Copying Permission Statement</span>
0010 <span class="comment">%</span>
0011 <span class="comment">%    This file is part of</span>
0012 <span class="comment">%</span>
0013 <span class="comment">%            STK: a Small (Matlab/Octave) Toolbox for Kriging</span>
0014 <span class="comment">%               (http://sourceforge.net/projects/kriging)</span>
0015 <span class="comment">%</span>
0016 <span class="comment">%    STK is free software: you can redistribute it and/or modify it under</span>
0017 <span class="comment">%    the terms of the GNU General Public License as published by the Free</span>
0018 <span class="comment">%    Software Foundation,  either version 3  of the License, or  (at your</span>
0019 <span class="comment">%    option) any later version.</span>
0020 <span class="comment">%</span>
0021 <span class="comment">%    STK is distributed  in the hope that it will  be useful, but WITHOUT</span>
0022 <span class="comment">%    ANY WARRANTY;  without even the implied  warranty of MERCHANTABILITY</span>
0023 <span class="comment">%    or FITNESS  FOR A  PARTICULAR PURPOSE.  See  the GNU  General Public</span>
0024 <span class="comment">%    License for more details.</span>
0025 <span class="comment">%</span>
0026 <span class="comment">%    You should  have received a copy  of the GNU  General Public License</span>
0027 <span class="comment">%    along with STK.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
0028 
0029 <a name="_sub0" href="#_subfunctions" class="code">function x = subsasgn(x, idx, val)</a>
0030 
0031 <span class="keyword">switch</span> idx(1).type
0032     
0033     <span class="keyword">case</span> <span class="string">'()'</span>
0034         
0035         <span class="keyword">if</span> <a href="length.html" class="code" title="function N = length(x) %#ok<STOUT>">length</a>(idx) ~= 1
0036             
0037             stk_error(<span class="string">'Illegal indexing.'</span>, <span class="string">'IllegalIndexing'</span>);
0038             
0039         <span class="keyword">else</span> <span class="comment">% ok, only one level of indexing</span>
0040             
0041             [n, d] = <a href="size.html" class="code" title="function varargout = size(x, varargin)">size</a>(x.data);
0042             L = <a href="length.html" class="code" title="function N = length(x) %#ok<STOUT>">length</a>(idx(1).subs);
0043             
0044             <span class="keyword">if</span> (d == 1) &amp;&amp; ~((L == 1) || (L == 2))
0045                 
0046                 stk_error([<span class="string">'Illegal indexing for a univariate stk_dataframe'</span> <span class="keyword">...</span>
0047                     <span class="string">'object.'</span>], <span class="string">'IllegalIndexing'</span>);
0048                 
0049             <span class="keyword">elseif</span> (d &gt; 1) &amp;&amp; (L ~= 2)
0050                 
0051                 stk_error([<span class="string">'multivariate stk_dataframe objects only support '</span> <span class="keyword">...</span>
0052                     <span class="string">'matrix-style indexing.'</span>], <span class="string">'IllegalIndexing'</span>);
0053                 
0054             <span class="keyword">else</span> <span class="comment">% ok, legal indexing</span>
0055                 
0056                 val = <a href="double.html" class="code" title="function xdata = double(x)">double</a>(val);
0057                 
0058                 <span class="keyword">if</span> ~<a href="isempty.html" class="code" title="function b = isempty(x)">isempty</a>(val)
0059                     
0060                     x.data = <a href="subsasgn.html" class="code" title="function x = subsasgn(x, idx, val)">subsasgn</a>(x.data, idx, val);
0061                     
0062                     [n1, d1] = <a href="size.html" class="code" title="function varargout = size(x, varargin)">size</a>(x.data);
0063                     <span class="keyword">if</span> (n1 &gt; n) &amp;&amp; ~ <a href="isempty.html" class="code" title="function b = isempty(x)">isempty</a> (x.rownames)
0064                         x.rownames = <a href="vertcat.html" class="code" title="function z = vertcat(x, y, varargin)">vertcat</a>(x.rownames, repmat({<span class="string">''</span>}, n1 - n, 1));
0065                     <span class="keyword">end</span>
0066                     <span class="keyword">if</span> (d1 &gt; d) &amp;&amp; ~ <a href="isempty.html" class="code" title="function b = isempty(x)">isempty</a> (x.colnames)
0067                         x.colnames = <a href="horzcat.html" class="code" title="function z = horzcat(x, y, varargin)">horzcat</a>(x.colnames, repmat({<span class="string">''</span>}, 1, d1 - d));
0068                     <span class="keyword">end</span>
0069                     
0070                 <span class="keyword">else</span> <span class="comment">% assignment rhs is empty</span>
0071                     
0072                     I = idx(1).subs{1};
0073                     
0074                     <span class="keyword">if</span> L &gt; 1
0075                         J = idx(1).subs{2};
0076                     <span class="keyword">else</span>
0077                         J = 1;
0078                     <span class="keyword">end</span>
0079                     
0080                     remove_columns = (strcmp(I, <span class="string">':'</span>) <span class="keyword">...</span>
0081                         || ((n == 1) &amp;&amp; isequal(I, 1)));
0082                     remove_rows = (strcmp(J, <span class="string">':'</span>) <span class="keyword">...</span>
0083                         || ((d == 1) &amp;&amp; isequal(J, 1)));
0084                     
0085                     <span class="keyword">if</span> ~ (remove_columns || remove_rows)
0086                         
0087                         stk_error(<span class="string">'Illegal indexing.'</span>, <span class="string">'IllegalIndexing'</span>);
0088                         
0089                     <span class="keyword">elseif</span> remove_columns
0090                         
0091                         x.data(:, J) = [];
0092                         <span class="keyword">if</span> ~ <a href="isempty.html" class="code" title="function b = isempty(x)">isempty</a>(x.colnames)
0093                             x.colnames(J) = [];
0094                         <span class="keyword">end</span>
0095                         
0096                     <span class="keyword">else</span> <span class="comment">% remove_rows</span>
0097                         
0098                         x.data(I, :) = [];
0099                         
0100                         <span class="keyword">if</span> <a href="isempty.html" class="code" title="function b = isempty(x)">isempty</a> (x.rownames)
0101                             nn1 = 1:n;  nn2 = nn1;  nn2(I) = [];
0102                             <span class="keyword">if</span> ~ isequal (nn1, nn2)
0103                                 x.rownames = cellfun (@num2str, <span class="keyword">...</span>
0104                                     num2cell (nn2'), <span class="string">'UniformOutput'</span>, false);
0105                             <span class="keyword">end</span>
0106                         <span class="keyword">else</span>
0107                             x.rownames(I) = [];
0108                         <span class="keyword">end</span>
0109                         
0110                     <span class="keyword">end</span>
0111                 <span class="keyword">end</span>
0112             <span class="keyword">end</span>
0113         <span class="keyword">end</span>
0114         
0115     <span class="keyword">case</span> <span class="string">'{}'</span>
0116         errmsg = <span class="string">'Indexing with curly braces is not allowed.'</span>;
0117         stk_error(errmsg, <span class="string">'IllegalIndexing'</span>);
0118         
0119     <span class="keyword">case</span> <span class="string">'.'</span>
0120         
0121         <span class="keyword">if</span> <a href="length.html" class="code" title="function N = length(x) %#ok<STOUT>">length</a>(idx) &gt; 1
0122             val = <a href="subsasgn.html" class="code" title="function x = subsasgn(x, idx, val)">subsasgn</a>(<a href="get.html" class="code" title="function value = get (x, propname)">get</a>(x, idx(1).subs), idx(2:end), val);
0123         <span class="keyword">end</span>
0124         x = <a href="set.html" class="code" title="function x = set (x, propname, value)">set</a>(x, idx(1).subs, val);
0125         
0126 <span class="keyword">end</span>
0127 
0128 <span class="keyword">end</span> <span class="comment">% function subsasgn</span>
0129 
0130 <span class="comment">%!shared x s t data</span>
0131 <span class="comment">%! x = stk_dataframe(rand(3, 2));</span>
0132 <span class="comment">%! s = {'a'; 'b'; 'c'};</span>
0133 <span class="comment">%! t = {'xx' 'yy'};</span>
0134 
0135 <span class="comment">%!test</span>
0136 <span class="comment">%! x.rownames = s;</span>
0137 <span class="comment">%! assert (isequal(get(x, 'rownames'), s))</span>
0138 
0139 <span class="comment">%!test</span>
0140 <span class="comment">%! x.colnames = t;</span>
0141 <span class="comment">%! assert (isequal(get(x, 'rownames'), s))</span>
0142 <span class="comment">%! assert (isequal(get(x, 'colnames'), t))</span>
0143 
0144 <span class="comment">%!test</span>
0145 <span class="comment">%! x.rownames{2} = 'dudule';</span>
0146 <span class="comment">%! assert (isequal(get(x, 'rownames'), {'a'; 'dudule'; 'c'}))</span>
0147 <span class="comment">%! assert (isequal(get(x, 'colnames'), t))</span>
0148 
0149 <span class="comment">%!test</span>
0150 <span class="comment">%! x.colnames{1} = 'martha';</span>
0151 <span class="comment">%! assert (isequal(get(x, 'rownames'), {'a'; 'dudule'; 'c'}))</span>
0152 <span class="comment">%! assert (isequal(get(x, 'colnames'), {'martha' 'yy'}))</span>
0153 
0154 <span class="comment">% %!error x.colnames{1} = 'yy'</span>
0155 <span class="comment">% %!error x.colnames = {'xx' 'xx'}</span>
0156 
0157 <span class="comment">%!test</span>
0158 <span class="comment">%! data = stk_dataframe(zeros(3, 2), {'x1' 'x2'});</span>
0159 <span class="comment">%! u = rand(3, 1); data.x2 = u;</span>
0160 <span class="comment">%! assert (isequal(double(data), [zeros(3, 1) u]))</span>
0161 
0162 <span class="comment">%!test</span>
0163 <span class="comment">%! data = stk_dataframe(zeros(3, 2), {'x1' 'x2'});</span>
0164 <span class="comment">%! data.x2(3) = 27;</span>
0165 <span class="comment">%! assert (isequal(double(data), [0 0; 0 0; 0 27]))</span>
0166 
0167 <span class="comment">%!error data.toto = rand(3, 1);</span>
0168 
0169 <span class="comment">%!shared x</span>
0170 <span class="comment">%! x = stk_dataframe(reshape(1:12, 4, 3), {'u' 'v' 'w'});</span>
0171 
0172 <span class="comment">%!test</span>
0173 <span class="comment">%! x(:, 2) = [];</span>
0174 <span class="comment">%! assert (isequal (size (x), [4 2]))</span>
0175 <span class="comment">%! assert (isequal (double (x), [1 9; 2 10; 3 11; 4 12]))</span>
0176 <span class="comment">%! assert (isequal (get (x, 'colnames'), {'u' 'w'}))</span>
0177 
0178 <span class="comment">%!test</span>
0179 <span class="comment">%! x(2, :) = [];</span>
0180 <span class="comment">%! assert (isequal (size (x), [3 2]))</span>
0181 <span class="comment">%! assert (isequal (double (x), [1 9; 3 11; 4 12]))</span>
0182 <span class="comment">%! assert (isequal (get (x, 'rownames'), {'1'; '3'; '4'}))</span>
0183 
0184 <span class="comment">%!test</span>
0185 <span class="comment">%! x.rownames = {'a'; 'b'; 'c'};</span>
0186 <span class="comment">%! x(2, :) = [];</span>
0187 <span class="comment">%! assert (isequal (size (x), [2 2]))</span>
0188 <span class="comment">%! assert (isequal (double (x), [1 9; 4 12]))</span>
0189 <span class="comment">%! assert (isequal (x.rownames, {'a'; 'c'}))</span>
0190 
0191 <span class="comment">%!test</span>
0192 <span class="comment">%! x(1, 2) = 11;</span>
0193 <span class="comment">%! assert (isequal (size (x), [2 2]))</span>
0194 <span class="comment">%! assert (isequal (double (x), [1 11; 4 12]))</span>
0195 
0196 <span class="comment">%!assert (isequal (double (x(:, :)), [1 11; 4 12]));</span>
0197 
0198 <span class="comment">%!test</span>
0199 <span class="comment">%! x(:, :) = [];</span>
0200 <span class="comment">%! assert (isempty (x));</span>
0201 
0202 <span class="comment">%!error x{1} = 2;</span>
0203 <span class="comment">%!error x(1, 2) = [];</span>
0204 <span class="comment">%!error x(1, 2).a = 3;</span>
0205 <span class="comment">%!error x(3) = 2;</span>
0206 
0207 <span class="comment">%--- tests with a univariate dataframe ----------------------------------------</span>
0208 
0209 <span class="comment">%!shared x</span>
0210 <span class="comment">%! x = stk_dataframe((1:5)');</span>
0211 
0212 <span class="comment">% linear indexing is allowed for univariate dataframes</span>
0213 <span class="comment">%!test x(2) = 0;   assert (isequal (double (x), [1; 0; 3; 4; 5]));</span>
0214 <span class="comment">%!test x(3) = [];  assert (isequal (double (x), [1; 0; 4; 5]));</span>
0215 
0216 <span class="comment">% matrix-style indexing also</span>
0217 <span class="comment">%!test x(3, 1) = 0;  assert (isequal(double(x), [1; 0; 0; 5]));</span>
0218 
0219 <span class="comment">% three indices is not allowed (even if the third is one...)</span>
0220 <span class="comment">%!error x(3, 1, 1) = 297;</span>
0221 
0222 <span class="comment">%!test % create a new row and a new column through subsasgn()</span>
0223 <span class="comment">%! x = stk_dataframe(rand(5, 2)); x(6, 3) = 7; disp(x)</span>
0224 <span class="comment">%! assert(isequal(size(x), [6, 3]));</span></pre></div>
<hr>

<address>
   HTML documentation for <strong>STK 2.0.0</strong>,
   generated by <strong>
   <a href="http://www.artefact.tk/software/matlab/m2html/" title="M2HTML website">M2HTML 1.5</a></strong>
</address>

</body>
</html>